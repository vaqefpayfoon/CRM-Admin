<div class="row">
  <div class="col-lg-12">
    <nb-card>
      <nb-card-header>{{_id == -1 ? 'Add Product' : 'Update Product'}}</nb-card-header>
      <nb-card-body>
        <form [formGroup]="baseForm" (submit)="baseSubmit()">
          <div class="form-group row">
            <label for="productName" class="label col-sm-2 col-form-label">ProductName</label>
            <div class="col-sm-7">
              <ng2-completer [datasource]="dataServiceProduct" inputClass="form-control" formControlName="productName" name="productName" inputName="searchField" [minSearchLength]="2" placeholder="Products">
                </ng2-completer>
            </div>
          </div>
          <div class="form-group row">
            <label for="supcustName" class="label col-sm-2 col-form-label">SupcustName</label>
            <div class="col-sm-7">
              <ng2-completer [datasource]="dataServiceSupcust" inputClass="form-control" formControlName="supcustName" name="supcustName" inputName="searchField" [minSearchLength]="2" placeholder="Supcusts">
                </ng2-completer>
            </div>
          </div>
          <div class="form-group row">
            <label for="personName" class="label col-sm-2 col-form-label">PersonName</label>
            <div class="col-sm-7">
              <input class="form-control" type="text" placeholder="PersonName" formControlName="personName" name="personName">
            </div>
          </div>
          <div class="form-group row">
              <label for="serial" class="label col-sm-2 col-form-label">Serial</label>
            <div class="col-sm-7">
                <input class="form-control" type="text" placeholder="Serial" formControlName="serial" name="serial">
            </div>
          </div>
          <div class="form-group row">
              <label for="barcode" class="label col-sm-2 col-form-label">Barcode</label>
              <div class="col-sm-7">
                  <input class="form-control" type="text" placeholder="Barcode" formControlName="barcode" name="barcode">
              </div>
          </div>
          <div class="form-group row">
            <label for="moreInfo" class="label col-sm-2 col-form-label">More Info</label>
            <div class="col-sm-7">
              <textarea name="moreInfo" id="moreInfo" formControlName="moreInfo" class="form-control" rows="6">

              </textarea>
            </div>
          </div>
          <div class="form-group row">
            <div class="offset-sm-3 col-sm-4">
              <button type="submit" nbButton status="primary" [disabled]="!baseForm.valid">Save</button>
            </div>
          </div>
        </form>
        <div *ngIf="saveState != '0'">
          <ng-container *ngIf="saveState == '1'; else elseTemplate">
            <nb-alert status="success">Data have been successfully Saved</nb-alert>
          </ng-container>
          <ng-template #elseTemplate>
            <nb-alert status="danger">{{saveState}}</nb-alert>
          </ng-template>
        </div>
        <hr/>
        <h5 class="grid-h">Product Attribute</h5>
        <form [formGroup]="orderForm">
          <div formArrayName="ingredients"
            *ngFor="let ingredientCtrl of getControls(); let i = index">
            <div [formGroupName]="i" class="row show-grid">
                <div class="col-4 col-sm-4">
                    <input class="form-control" formControlName="attributeName" placeholder="AttributeName">
                </div>
                <div class="col-4 col-sm-4">
                    <input class="form-control" formControlName="attributeValue" placeholder="AttributeValue">
                </div>
                <div class="col-2 col-sm-2">
                    <div class="buttons-row">
                      <button type="submit" nbButton status="danger" [size]="'small'" (click)="onDeleteIngredient(i)" >Delete</button>
                    </div>
                </div>
            </div>
          </div>
          <button type="submit" nbButton status="primary" [size]="'small'"
           (click)="onAddIngredient()">Save</button>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>
